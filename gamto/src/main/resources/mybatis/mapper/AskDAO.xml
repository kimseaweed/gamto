<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mrmr.gamto.admin.dao.AskDAO">
  <!-- 문의전체보기  -->
 <select id="askListDao" parameterType="List" resultType="com.mrmr.gamto.admin.dto.AskDTO">
  SELECT a.*
	FROM (SELECT COUNT(*) OVER () AS a_tot,ask.*,  ROW_NUMBER() OVER (ORDER BY a_seq_number desc) AS row_num FROM ask) a
	WHERE row_num BETWEEN ((#{pageNo}  - 1) * 10) + 1 AND (#{pageNo} * 10)
 </select>
 
 <!-- 문의상세보기 -->
 <select id="askViewDao" resultType="com.mrmr.gamto.admin.dto.AskDTO">
 	SELECT * FROM ask WHERE a_seq_number=#{a_seq_number}
 </select>
 
  <!-- 문의진행사항 변경 -->
 <update id="askUpdateComplete">
 	UPDATE ask SET a_complete = #{a_complete} WHERE a_seq_number=#{a_seq_number}
 </update>
 
 <!-- 문의 검색 및 페이징 -->
 <select id="askSearchListDao" parameterType="List" resultType="com.mrmr.gamto.admin.dto.AskDTO">
 	SELECT *
	FROM (
    SELECT *,
           ROW_NUMBER() OVER (ORDER BY a_seq_number desc) AS row_num
    	FROM ask
    	WHERE #{query}
	)
	WHERE row_num BETWEEN ((#{pageNo} - 1) * 10) + 1 AND (#{pageNo} * 10)
 </select>


</mapper>